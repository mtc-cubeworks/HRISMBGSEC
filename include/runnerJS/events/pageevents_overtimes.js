
Runner.pages.PageSettings.addPageEvent('overtimes',Runner.pages.constants.PAGE_ADD,"afterPageReady",function(pageObj,proxy,pageid,inlineRow,inlineObject){var ctrlfd=Runner.getControl(pageid,'FromDateTime');var ctrltd=Runner.getControl(pageid,'ToDateTime');var ctrlhrs=Runner.getControl(pageid,'NoMins');d=new Date();var nt=d.toLocaleTimeString();function funca1(){var diffMs=(ctrltd.getValue()-ctrlfd.getValue());var diffHrs=Math.floor((diffMs%86400000)/3600000);var diffMins=Math.round(((diffMs%86400000)%3600000)/60000);ctrlhrs.setValue((diffHrs*60)+diffMins);};ctrlfd.on('onchange',funca1);ctrltd.on('onchange',funca1);ctrlfd.on('keyup',funca1);ctrltd.on('keyup',funca1);});Runner.pages.PageSettings.addPageEvent('overtimes',Runner.pages.constants.PAGE_EDIT,"afterPageReady",function(pageObj,proxy,pageid,inlineRow,inlineObject){var ctrlp=Runner.getControl(pageid,'Posted');var ctrlap=Runner.getControl(pageid,'Approved');var ctrlad=Runner.getControl(pageid,'ApprovedDate');var ctrlat=Runner.getControl(pageid,'ApprovedTime');var ctrlfd=Runner.getControl(pageid,'FromDateTime');var ctrltd=Runner.getControl(pageid,'ToDateTime');var ctrlhrs=Runner.getControl(pageid,'NoMins');ctrlp.setDisabled();ctrlad.makeReadonly()
d=new Date();var nt=d.toLocaleTimeString();function funca(){if(ctrlap.getValue()=='on'){ctrlad.setValue(d);ctrlat.setValue(nt);};if(ctrlap.getValue()==''){ctrlad.setValue('');ctrlat.setValue('');};};function funca1(){var diffMs=(ctrltd.getValue()-ctrlfd.getValue());var diffHrs=Math.floor((diffMs%86400000)/3600000);var diffMins=Math.round(((diffMs%86400000)%3600000)/60000);ctrlhrs.setValue((diffHrs*60)+diffMins);};ctrlap.on('onchange',funca);ctrlfd.on('onchange',funca1);ctrltd.on('onchange',funca1);ctrlfd.on('keyup',funca1);ctrltd.on('keyup',funca1);});